var airPlane=function(){function g(o){if(!E.isCalibrated()){E.calibrate(o);return}var a=n-i;if(o.fingers!==null&&o.fingers!==undefined&&o.fingers.length>0){var h=0,p=0,d=0;while(h<o.fingers.length){if(h<o.fingers.length){if(o.fingers[h].tipPosition[2]<d&&o.fingers[h].direction.z<0){if(o.fingers[h].tipPosition[2]>e){p=h;d=o.fingers[h].tipPosition[2]}}}h+=1}var g=0;while(g<o.fingers.length){if(o.fingers[g].tipPosition[2]<e+s*l){var y=o.fingers[g].tipPosition[0],b=o.fingers[g].tipPosition[1];var S=(y+=0-i)/(n-i)*100;var x=(b+=0-r)/(t-r)*100;var T=Math.floor(0+window.innerWidth/100*S);var N=Math.floor(window.innerHeight-window.innerHeight/100*x);var C=o.fingers[g].tipPosition[2];if(C-w.lastCoords.z>w.threshold.get()&&!f&&T-w.threshold.lastCoords.x>c.get()||C-w.lastCoords.z>w.threshold.get()&&!f&&N-w.lastCoords.y>moveThreshold){T=w.lastCoords.x;N=w.lastCoords.y;C=w.lastCoords.z;f=false}else{lastX=T;lastY=N;lastZ=C}if(w.get()[g]===undefined){w.createPointer()}if(w.display()){w.get()[g].style.opacity=1;w.get()[g].style.left=T+50+"px";w.get()[g].style.top=N+"px"}else{w.get()[g].style.opacity=0}if(g===p&&o.fingers[g].tipPosition[2]<e+s){var k=document.elementFromPoint(T+window.pageXOffset,N+window.pageYOffset);w.get()[g].style.opacity=1;if(k!==null&&!u){k.dispatchEvent(m);(function(){u=true;setTimeout(function(){u=false},v)})()}}}else{if(w.get()[g]!==undefined){w.get()[g].style.left="-100px";w.get()[g].style.top="-100px"}}g+=1}var L=g;while(L<w.get().length){w.get()[L].style.top="-100px";w.get()[L].style.left="-100px";L+=1}}else if(o.hands.length<1){f=true;if(w.get.length>0){w.get()[0].style.top="-100px";w.get()[0].style.left="-100px"}}}function y(e){if(e.event!==undefined){m=new Event(e.event)}if(e.delay!==undefined){b(e.delay)}if(e.threshold!==undefined&&typeof e.threshold==="number"){c=e.threshold}if(e.percentToDrop!==undefined&&typeof e.percentToDrop==="number"){h=e.percentToDrop()}if(e.alwaysReset!==undefined&&e.alwaysReset===true||e.alwaysReset===1){S()}if(e.displayPointers!==undefined&&typeof e.displayPointers==="boolean"){w.display(e.displayPointers)}}function b(e){if(e!==null&&e!==undefined&&typeof e==="number"&&e>-1){v=e}else{console.error("Invalid input")}}function S(){localStorage.clear();T.empty();e=t=n=r=i=undefined;o=isTopSet=isRightSet=isBottomSet=isLeftSet=false;if(p===undefined){E.createCalibrationElement()}p.style.display="block";p.style.left=window.innerWidth/2-p.offsetWidth/2}function x(){return{zDepth:e,top:t,right:n,bottom:r,left:i}}var e,t,n,r,i,s=20;var o=isTopSet=isRightSet=isBottomSet=isLeftSet=false;var u=false,a=2e3,f=true,l=2;var c=200,h=20;var p,d;var v=500;var m=new Event("click");var w=function(){function i(){return e}function s(e){if(e!==undefined&&typeof e==="boolean"){t=e}return t}function o(){var t=document.createElement("div");t.setAttribute("class","cursor");document.body.appendChild(t);e.push(t)}var e=[],t=true,n={x:undefined,y:undefined,z:undefined};var r=function(){function t(t){if(typeof e==="number"){e=t}else{console.error("Not a valid value")}}function n(){return e}var e=10;return{set:t,get:n}}();return{get:i,display:s,createPointer:o,threshold:r,lastCoords:n}}();var E=function(){function s(){if(!o||!isTopSet||!isRightSet||!isBottomSet||!isLeftSet){if(localStorage.getItem("leapCoords")===null){return false}else{var s=JSON.parse(localStorage.getItem("leapCoords"));e=s.z;t=s.topCoords;n=s.rightCoords;r=s.bottomCoords;i=s.leftCoords;o=isTopSet=isRightSet=isBottomSet=isLeftSet=true;return true}}else if(o&&isTopSet&&isRightSet&&isBottomSet&&isLeftSet&&localStorage.getItem("leapCoords")===null){var u={z:e,topCoords:t,rightCoords:n,bottomCoords:r,leftCoords:i};localStorage.setItem("leapCoords",JSON.stringify(u));return true}else{return true}}function f(){p=document.createElement("div");p.setAttribute("id","calEl");d=document.createElement("div");d.setAttribute("id","progress");p.appendChild(d);document.body.appendChild(p);p.style.top=window.innerHeight/2-p.offsetWidth/2+"px";p.style.left=window.innerWidth/2-p.offsetHeight/2+"px";p.style.display="none"}function l(e){console.log("Point set. Remove Finger.");d.style.height="0px";p.style.display="none";if(e.top!==undefined){p.style.top=e.top+"px"}if(e.left!==undefined){p.style.left=e.left+"px"}if(e.display!==undefined){p.style.display=e.display}u=true;if(e.final!==true){setTimeout(function(){u=false;p.style.display="block"},a)}}function h(e){d.style.height=p.offsetHeight/100*e+"px"}function v(s){if(u){return}var a=s.fingers;if(s.fingers.length>1){return false}if(p===undefined){f();p.style.display="block"}if(a!==null&&a!==undefined&&a.length>0){var d=0;while(d<1){if(!o){T.addPoint({which:"zMeasure",value:a[d].tipPosition[2]});if(T.checkPointProgress({which:"zMeasure"})>c){o=true;e=T.getPoint({which:"zMeasure"});l({top:0})}else{h(T.checkPointProgress({which:"zMeasure"})/c*100)}}else if(!isTopSet){T.addPoint({which:"topMeasure",value:a[d].tipPosition[1]});if(T.checkPointProgress({which:"topMeasure"})>c){isTopSet=true;t=T.getPoint({which:"topMeasure"});l({top:window.innerHeight/2-p.offsetWidth/2,left:window.innerWidth-p.offsetWidth/1})}else{h(T.checkPointProgress({which:"topMeasure"})/c*100)}}else if(!isRightSet){T.addPoint({which:"rightMeasure",value:a[d].tipPosition[0]});if(T.checkPointProgress({which:"rightMeasure"})>c){isRightSet=true;n=T.getPoint({which:"rightMeasure"});l({top:window.innerHeight-p.offsetHeight,left:window.innerWidth/2-p.offsetWidth/2})}else{h(T.checkPointProgress({which:"rightMeasure"})/c*100)}}else if(!isBottomSet){T.addPoint({which:"bottomMeasure",value:a[d].tipPosition[1]});if(T.checkPointProgress({which:"bottomMeasure"})>c){isBottomSet=true;r=T.getPoint({which:"bottomMeasure"});l({top:window.innerHeight/2-p.offsetWidth/2,left:0})}else{h(T.checkPointProgress({which:"bottomMeasure"})/c*100)}}else if(!isLeftSet){T.addPoint({which:"leftMeasure",value:a[d].tipPosition[0]});if(T.checkPointProgress({which:"leftMeasure"})>c){isLeftSet=true;i=T.getPoint({which:"leftMeasure"});l({top:window.innerHeight/2-p.offsetWidth/2,left:window.innerWidth/2-p.offsetWidth/2,display:"none","final":true})}else{var v=T.checkPointProgress({which:"leftMeasure"})/c*100;h(T.checkPointProgress({which:"leftMeasure"})/c*100)}}d+=1}}}return{isCalibrated:s,calibrate:v,createCalibrationElement:f}}();var T=function(){function t(t){if(t!==undefined&&t!==null){if(e[t.which]!==undefined&&t.value!==undefined&&typeof t.value==="number"){e[t.which].push(t.value)}}}function n(t){var n=0;for(var r=0+Math.floor(c/100*h);r<e[t.which].length;r+=1){n+=e[t.which][r]}return n/(e[t.which].length-Math.floor(c/100*h))}function r(t){return e[t.which].length}function i(){for(var t in e){e[t]=[]}}var e={zMeasure:[],topMeasure:[],rightMeasure:[],bottomMeasure:[],leftMeasure:[]};return{addPoint:t,getPoint:n,checkPointProgress:r,empty:i}}();return{checkCoords:g,calibration:E,reset:S,currentCoords:x,set:y,screenPointers:w}}()